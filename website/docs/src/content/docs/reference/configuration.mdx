---
title: Configuration Reference
description: Detailed guide for agentsync.toml configuration.
---

The `agentsync.toml` file is the heart of your agent configuration. It defines the source of truth, how gitignore is managed, and the specific targets for each AI assistant.

By default, `agentsync` looks for this file at `.agents/agentsync.toml`.

## Global Settings

### `source_dir`
The base directory for your source files, relative to the configuration file.
- **Default**: `"."`

### `compress_agents_md`
When enabled, AgentSync creates a compressed copy of `AGENTS.md` (named `AGENTS.compact.md`)
and points any `AGENTS.md` targets using `type = "symlink"` or `type = "symlink-contents"`
to the compressed file. The original `AGENTS.md` is never modified.
- **Default**: `false`

```toml
compress_agents_md = true
```

### `default_agents`
A list of agent names to run when `--agents` is not specified on the CLI. Uses case-insensitive substring matching.
- **Default**: `[]` (empty, meaning all enabled agents will run)

```toml
# Only run these agents by default
# When running 'agentsync apply' without --agents, only copilot, claude, and gemini will be processed
default_agents = ["copilot", "claude", "gemini"]

[agents.copilot]
enabled = true

[agents.claude]
enabled = true

[agents.gemini]
enabled = true

[agents.cursor]
enabled = true  # Enabled, but won't run unless explicitly specified with --agents cursor
```

**Behavior:**
- If `default_agents` is set and no `--agents` flag is provided → runs only agents matching `default_agents`
- If `--agents` flag is provided → uses CLI filter (overrides `default_agents`)
- If `default_agents` is empty → runs all enabled agents (backward compatible)

## Gitignore Management

AgentSync can automatically manage your `.gitignore` file to ensure that generated symbolic links and agent-specific files are not accidentally committed to version control.

```toml
[gitignore]
enabled = true
marker = "AI Agent Symlinks"
# Additional entries only - AgentSync automatically adds known patterns for enabled agents
entries = []
```

- **`enabled`**: If `true`, AgentSync will update `.gitignore`.
- **`marker`**: The text used in comments to identify the AgentSync section in `.gitignore`.
- **`entries`**: A list of additional file paths to add to the ignore list. This is only needed for files not covered by AgentSync's known patterns.

### Known Ignore Patterns

AgentSync automatically adds the following patterns to `.gitignore` based on which agents are **enabled**:

| Agent | Automatically Added Patterns |
| :--- | :--- |
| **claude** | `.mcp.json`, `.claude/commands/`, `.claude/skills/` |
| **copilot** | `.vscode/mcp.json` |
| **codex** | `.codex/config.toml` |
| **gemini** | `GEMINI.md`, `.gemini/settings.json`, `.gemini/commands/`, `.gemini/skills/` |
| **cursor** | `.cursor/mcp.json`, `.cursor/skills/` |
| **vscode** | `.vscode/mcp.json` |
| **opencode** | `opencode.json`, `.opencode/command/`, `.opencode/skill/` |

**Notes:**
- The `entries` field in your config is only needed for additional files not covered by the patterns above
- All symlink destination paths are also automatically added to `.gitignore`
- Duplicate entries are automatically deduplicated

## Agent Definitions

Each assistant is defined under the `[agents.<name>]` section.

```toml
[agents.claude]
enabled = true
description = "Claude Code - Anthropic's AI coding assistant"

[agents.claude.targets.instructions]
source = "AGENTS.md"
destination = "CLAUDE.md"
type = "symlink"
```

### Target Types

| Type | Description |
| :--- | :--- |
| `symlink` | Creates a direct symbolic link from `destination` to `source`. |
| `symlink-contents` | Creates individual symbolic links for every file inside the `source` directory into the `destination` directory. |

#### `symlink-contents` with patterns
When using `symlink-contents`, you can filter files using a glob pattern:

```toml
[agents.claude.targets.commands]
source = "command"
destination = ".claude/commands"
type = "symlink-contents"
pattern = "*.agent.md"
```

## MCP (Model Context Protocol)

Configuration for MCP servers is managed under the `[mcp]` and `[mcp_servers]` sections.

For a detailed guide on how to use MCP with AgentSync, see the [MCP Integration Guide](/agentsync/guides/mcp/).
