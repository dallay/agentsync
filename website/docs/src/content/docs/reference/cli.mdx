---
title: CLI Reference
description: Detailed documentation for all agentsync commands.
---

`agentsync` provides a straightforward set of commands to manage your AI agent configurations.

## Commands

### `init`

Initializes a new AgentSync configuration in the current directory.

```bash
agentsync init [FLAGS]
```

**Flags**:
- `-p, --path <PATH>`: Project root directory (defaults to current dir).
- `-f, --force`: Overwrite existing configuration without prompting.
- `-w, --wizard`: Run interactive configuration wizard to migrate existing agent files.

**Actions**:
- Creates the `.agents/` directory if it doesn't exist.
- Creates a default `.agents/agentsync.toml` file.
- Creates a template `.agents/AGENTS.md` file.

**Wizard Mode**:
When using the `--wizard` flag, AgentSync will:
1. Scan your project for existing agent-related files (CLAUDE.md, .cursor/, .mcp.json, .github/copilot-instructions.md, etc.)
2. Interactively prompt you to select which files to migrate
3. For instruction files (.mcp.json, Copilot instructions): Read their content and merge into `.agents/AGENTS.md` (files are not copied or backed up)
4. For other agent files (e.g., .cursor/): Copy to the `.agents/` directory
5. Optionally create backups of original files (after user confirmation, only for files that were copied)
6. Generate a configuration (`.agents/agentsync.toml`) that manages these files with symlinks

---

### `apply`

Applies the configuration defined in `agentsync.toml` by creating symbolic links and updating `.gitignore`.

```bash
agentsync apply [FLAGS]
```

**Flags**:
- `-p, --path <PATH>`: Path to the project root.
- `-c, --config <PATH>`: Use a custom configuration file path instead of the default `.agents/agentsync.toml`.
- `--clean`: Deletes existing symbolic links before applying. Useful for fixing broken links or cleaning up old configurations.
- `--dry-run`: Shows what actions would be taken without actually making any changes to the filesystem.
- `-v, --verbose`: Enable verbose logging.
- `-a, --agents <AGENTS>`: Filter by agent (comma-separated list, e.g., `claude,copilot`). **Overrides** `default_agents` in config.
- `--no-gitignore`: Disable automatic `.gitignore` updates.

**Agent Selection Priority**:
When running `agentsync apply`, agents are selected in this order:
1. **`--agents` flag** (if provided) → runs only specified agents
2. **`default_agents` in config** (if set and no `--agents`) → runs only agents in the list
3. **All enabled agents** (if neither above is set) → runs all agents with `enabled = true`

Examples:
```bash
# With default_agents = ["copilot", "claude"] in config:
agentsync apply              # Runs only copilot and claude
agentsync apply --agents gemini  # Runs only gemini (CLI overrides config)
agentsync apply --agents copilot,claude,gemini  # Runs all three

# Without default_agents in config:
agentsync apply              # Runs all enabled agents
```

---

### `clean`

Removes all symbolic links managed by AgentSync.

```bash
agentsync clean [FLAGS]
```

**Flags**:
- `-p, --path <PATH>`: Path to the project root.
- `-c, --config <PATH>`: Path to a custom configuration file.
- `--dry-run`: Shows what would be removed without actually deleting anything.
- `-v, --verbose`: Enable verbose logging.

---

### `skill`

Manage installable AI agent skills.

```bash
agentsync skill [FLAGS] <COMMAND>
```

**Global Flags**:
- `--project-root <PATH>`: Root of the project (defaults to current directory).

#### `install`

Install a skill from a provider, local archive, or directory.

```bash
agentsync skill install [FLAGS] <SKILL_ID>
```

- `--source <SOURCE>`: Optional. Source directory, archive URL, or provider-specific identifier.
- `--json`: Output machine-readable JSON.

#### `update`

Update an existing skill.

```bash
agentsync skill update [FLAGS] <SKILL_ID>
```

- `--source <SOURCE>`: Optional. New source for the update.
- `--json`: Output machine-readable JSON.

#### `list`

List all installed skills.

:::note
The `list` command is currently under development and not yet implemented.
:::

```bash
agentsync skill list

# Error: list command not implemented

```

---

### `--version`

Shows the current version of the AgentSync CLI.

```bash
agentsync --version
```

---

### `--help`

Shows help information for the CLI or a specific command.

```bash
agentsync --help
agentsync apply --help
```

## Global Flags

- `-v, --verbose`: Enable verbose logging for debugging purposes.
- `-q, --quiet`: Only output errors.

---

### `status`

Verify the status of symlinks managed by AgentSync and report drift.

```bash
agentsync status [--project-root <path>] [--json]
```

**Flags**:
- `--project-root <path>`: Optional. Path to the project root to locate the agentsync config. If omitted, the current working directory is used.
- `--json`: Output machine-readable JSON (pretty-printed) describing each managed target. Useful for CI.

**Behavior**:
- Iterates over all enabled agents and their targets from your `agentsync.toml`.
- For each target it reports:
  - `destination`: Path in the project where the symlink should exist
  - `exists`: Whether the destination path exists
  - `is_symlink`: Whether the destination is a symlink
  - `points_to`: The symlink target (if any)
  - `expected_source`: The resolved expected source path if the source exists

Human-friendly output uses colors and statuses:
- `✔ OK` — symlink exists and points to the expected source
- `✗ Incorrect link` — symlink exists but points somewhere else
- `! Missing` — destination does not exist
- `· Exists but not a symlink` — a regular file or directory exists at the destination

Exit codes:
- `0` — no problems detected
- `1` — one or more issues found (suitable to fail CI builds)

Examples:
- Human readable: `agentsync status`
- JSON for CI: `agentsync status --json`
- With custom project root: `agentsync status --project-root /path/to/repo --json`

---

### `doctor`

Run diagnostic and health checks for the AgentSync environment.

```bash
agentsync doctor [FLAGS]
```

**Flags**:
- `--project-root <PATH>`: Project root directory (defaults to current directory).

**Diagnostics performed**:
1.  **Config Loading**: Verifies that `agentsync.toml` can be found and parsed correctly.
2.  **Source Directory**: Checks if the configured `source_dir` exists.
3.  **Target Sources**: Verifies that all files/directories referenced as `source` in the config actually exist.
4.  **Destination Conflicts**: Detects duplicate destinations or overlapping paths (where one destination is a parent of another).
5.  **MCP Servers**: Audits configured MCP servers to ensure their `command` executables are available in the system `PATH`.
6.  **Gitignore Audit**: Verifies if the `.gitignore` file has the managed AgentSync section and if it is up to date with all required entries.

**Exit codes**:
- `0` — all checks passed
- `1` — one or more issues detected
