---
title: Workspaces Reference
description: Detailed guide to the repository structure and polyglot development environment.
---

`agentsync` is a multi-language project that combines a high-performance Rust core with a TypeScript distribution layer.

## Repository Structure

- `src/`: Core logic and CLI implementation in **Rust**.
- `npm/agentsync/`: **TypeScript** wrapper used for NPM distribution.
- `website/docs/`: Documentation site built with **Starlight**.
- `.agents/`: Single source of truth for agent configurations and skills.
- `tests/`: Integration and E2E tests for the CLI.

---

## Rust Workspace (The Core)

The core logic is written in Rust for speed, safety, and easy distribution as a single binary.

- **Tools**: Cargo, Make
- **Version**: Rust 1.89+ (Edition 2024)
- **Key Commands**:

  ```bash
  make rust-build # Build core binary
  make rust-test  # Run unit and integration tests
  make rust-run   # Run the CLI locally
  ```

- **Error Handling**: Uses `thiserror` for custom errors and `anyhow` for application-level error handling.

---

## JavaScript Workspace (Distribution)

The JS workspace provides a Node.js distribution layer and managed binary downloads for different platforms.

- **Tools**: pnpm, TypeScript, Make
- **Location**: `npm/agentsync/`
- **Key Commands**:

  ```bash
  make js-test    # Verify types and run JS tests
  make js-build   # Compile TypeScript to JS
  ```

- **Strictness**: We enforce strict TypeScript configurations. Avoid `any` at all costs.

---

## Modern Tooling

We use a **Makefile** to orchestrate tasks across both Rust and JavaScript stacks.

- **`make install`**: Install all dependencies (JS and Rust).
- **`make verify-all`**: Run the full verification suite (tests, linters, docs build).
- **`make rust-test`**: Run Rust unit tests.
- **`make js-test`**: Run JavaScript unit tests.
- **`make fmt`**: Format all code (Rust and JS).

We also recommend these modern CLI tools:
- `bat`: Syntax-highlighted file viewing (replaces `cat`).
- `rg` (ripgrep): Fast recursive search (replaces `grep`).
- `fd`: Simple and fast alternative to `find`.
- `sd`: Intuitive find and replace (replaces `sed`).
- `eza`: Feature-rich directory listing (replaces `ls`).
